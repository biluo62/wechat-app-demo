webpackJsonp([7],{359:function(e,t,n){try{(function(){"use strict";function e(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,s,l,u,i=a(n(2)),c=a(n(10)),d=a(n(3)),o=a(n(6)),f=a(n(11)),p=a(n(12)),m=n(1),h=a(m),y=a(n(9)),w=n(38),g=n(24),v=n(352),k=a(n(44)),E=a(n(404)),_=a(n(13)),T=a(n(119)),N=a(n(344)),C=a(n(345)),S=a(n(350)),A=a(n(346)),F=a(n(353)),b=a(n(387)),O=e(n(405)),D=a(n(391)),x=e(n(64));n(407);var G=function(e){return h.default.createElement("div",{className:"new-friend-group-center"},h.default.createElement(F.default,e),h.default.createElement("p",{className:"new-friend-group-message"},e.messages&&e.messages.length?(0,E.default)(e.messages):""))},M=function(e){switch(+e.status){case x.CONSTANT_ADD_STATUS_ACCEPT:return h.default.createElement("p",{className:"new-friend-status status-accept"},"已添加");case x.CONSTANT_ADD_STATUS_AWAIT:return h.default.createElement(b.default,{className:"new-friend-status status-await",theme:"primary",size:"sm",onClick:function(t){t&&(t.stopPropagation(),t.preventDefault()),e.onClickAccept&&e.onClickAccept()}},"接受");case x.CONSTANT_ADD_STATUS_EXPIRE:return h.default.createElement("p",{className:"new-friend-status status-expire"},"已过期");case x.CONSTANT_ADD_STATUS_REFUSE:return h.default.createElement("p",{className:"new-friend-status status-refuse"},"已过期");default:return h.default.createElement(b.default,{className:"new-friend-status status-other",theme:"default",size:"sm",onClick:function(t){t&&(t.stopPropagation(),t.preventDefault()),e.onClickAdd&&e.onClickAdd()}},"添加")}},j=(r=(0,D.default)())((u=l=function(e){function t(e){(0,d.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return n.handleRouteToAddFriends=function(){n.props.history.push("/wechat/add-friend")},n.getStickyContainerCells=function(e){var t=n.props.newFriendsGroups;return t[e]?t[e].map(function(e){return{left:h.default.createElement("img",{className:"new-friend-group-avatar",src:e.headerUrl}),center:h.default.createElement(G,e),right:h.default.createElement(M,{status:e.status}),link:"/wechat/contact/detail/"+e.wxid}}):[]},n.renderAddedFriendsSticky=function(){var e=n.props,t=e.newFriendsGroups,a=e.newFriendsGroupsKeys;return(0,k.default)(t)?null:h.default.createElement("ul",{className:"contact-frineds"},a.map(function(e,t){return h.default.createElement(v.StickyContainer,{className:"contact-friends-group",key:t},h.default.createElement(v.Sticky,{topOffset:n.getStickyTopOffset()},function(t){var a=t.isSticky,r=t.style;return h.default.createElement("p",{className:(0,_.default)("contact-alpha",{"stickyed-friend":a}),style:(0,i.default)({},r,{top:n.getStickyChildrenTop()})},e)}),h.default.createElement(A.default,{cells:n.getStickyContainerCells(e)}))}))},n.getStickyTopOffset=n.getStickyTopOffset.bind(n),n.getStickyChildrenTop=n.getStickyChildrenTop.bind(n),n}return(0,p.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.props.newFriends||this.props.fetchNewFriends()}},{key:"render",value:function(){return h.default.createElement("div",{className:"contact-new-friends-wrapper"},h.default.createElement(N.default,{title:"新的朋友",back:h.default.createElement(C.default,{history:this.props.history},h.default.createElement("span",{className:"weui-back-centent"},"通讯录"))},h.default.createElement("p",{className:"link-header-operation",onClick:this.handleRouteToAddFriends},"添加朋友")),h.default.createElement(S.default,{placeholder:"微信号/手机号"}),h.default.createElement("div",{className:"telephone-contact-panel"},h.default.createElement("i",{className:"iconfont icon-iphone-address"}),h.default.createElement("p",{className:"telephone-contact-desc"},"添加手机联系人")),this.renderAddedFriendsSticky())}}]),t}(m.Component),l.propTypes={newFriends:y.default.array,newFriendsGroups:y.default.object,newFriendsGroupsKeys:y.default.array,fetchNewFriends:y.default.func.isRequired},s=u))||s;t.default=(0,w.connectAdvanced)(function(e){var t={},n=(0,g.bindActionCreators)(O,e);return function(e,a){var r=e.wechat.newFriendsMain,s=void 0===r?{}:r,l=s.newFriends,u=s.newFriendsGroups,c=s.newFriendsGroupsKeys,d=(0,i.default)({},a,{newFriends:l,newFriendsGroups:u,newFriendsGroupsKeys:c},n);return t=T.default.shallowEqual(t,d)?t:d}})(j)}).call(this)}finally{}},387:function(e,t,n){try{(function(){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e(n(349)),r=e(n(1)),s=e(n(13));n(388);t.default=function(e){var t={},n=["theme","size"],l=!0,u=!1,i=void 0;try{for(var c,d=(0,a.default)(n);!(l=(c=d.next()).done);l=!0){var o=e[c.value]||"";t["weui-btn-"+o]=!!o}}catch(e){u=!0,i=e}finally{try{!l&&d.return&&d.return()}finally{if(u)throw i}}var f=e.onClick||function(){};return r.default.createElement("div",{className:(0,s.default)("weui-btn",t),onClick:f},e.children&&e.children)}}).call(this)}finally{}},388:function(e,t){},391:function(e,t,n){try{(function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(n(348)),a=n(64);t.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.56,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=(e.default.getElementStyle(document.documentElement,"font-size")||"16px").replace("px","");return function(e){e.prototype.getStickyTopOffset=function(){return-((a.HEADER_HEIGHT+t)*r-n)},e.prototype.getStickyChildrenTop=function(){return a.HEADER_HEIGHT*r-n}}}}).call(this)}finally{}},404:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},405:function(e,t,n){try{(function(){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchNewFriends=void 0;var a=e(n(66)),r=e(n(124)),s=e(n(125)),l=n(7),u=["今天","昨天","前天","三天前"],i=function(e){var t=(0,r.default)().diff((0,r.default)(e),"days");return u[t]?u[t]:u[u.length-1]};t.fetchNewFriends=function(){var e=n(406)||[],t=(0,s.default)(e,function(e){return i(e.time)})||{},r=(0,a.default)(t).sort(function(e,t){return u.indexOf(e)-u.indexOf(t)});return{type:l.WECHAT_CONTACT_FETCH_NEW_FRIENDS,payload:{newFriends:e,newFriendsGroups:t,newFriendsGroupsKeys:r}}}}).call(this)}finally{}},406:function(e,t){e.exports=[{wxid:"wangyu22202",headerUrl:"http://owgszbgsl.bkt.clouddn.com/avatar-mw.jpeg",nickname:"王宇",remark:"merlin.wang",time:1505790655602,messages:["我是Merlin"],status:1},{wxid:"MrCJ365",headerUrl:"http://owgszbgsl.bkt.clouddn.com/avatar-cw.jpeg",nickname:"成江",remark:"",time:1505470665990,messages:["您好","好久不见"],status:2},{wxid:"summer_coder",headerUrl:"http://owgszbgsl.bkt.clouddn.com/avatar-gj.jpeg",nickname:"summer7",remark:"",time:1505618057844,messages:["请求添加你为朋友"],status:3},{wxid:"shine77-",headerUrl:"http://owgszbgsl.bkt.clouddn.com/avatar-cr.jpeg",nickname:"放了那只猫",remark:"",time:1505704426448,messages:["我是38班XXX"],status:0}]},407:function(e,t){}});